import{a as B}from"./axios.0ae12843.js";import{f as h,g as d,h as b,o as w,i as A,w as a,b as e,V as $,a as q,t as D,j as N,k as U,l as R,n as S,q as j,s as C,d as p,u as E,v as F,x as I,y as L,z as k,A as x,B as z,C as y}from"./index.0d7d1e3a.js";const v=B.create({baseURL:"http://localhost:8080/api/tags",headers:{"Content-type":"application/json"}}),T={getAllTags(){return v.get("")},getTagById(t){return v.get(`/${t}`)},creatTag(t){return v.post("",t)},updateTag(t,m){return v.put(`/${t}`,m)},deleteTag(t){return v.delete(`/${t}`)}},M={class:"headline"},G=h({__name:"TagDialog",props:{tag:{},dialogVisible:{type:Boolean}},emits:["refresh","update:dialogVisible"],setup(t,{emit:m}){const o=t,r=m,n=d(!1),c=d(!1),u=d({name:""}),g=d(!1),_={required:l=>!!l||"Required."};console.log("dialog",n.value),console.log("edit",g.value),b(()=>o.tag,l=>{l!=null?(u.value={...l},g.value=!0):(u.value={name:""},g.value=!1)},{immediate:!0}),b(()=>o.dialogVisible,l=>{n.value=l},{immediate:!0});const s=()=>{n.value=!1,r("update:dialogVisible",!1)},V=async()=>{c.value&&(g.value&&o.tag?await T.updateTag(o.tag.id,u.value):await T.creatTag(u.value),s(),r("refresh"),console.log("Tag saved"))};return(l,i)=>(w(),A(F,{modelValue:n.value,"onUpdate:modelValue":i[2]||(i[2]=f=>n.value=f),"max-width":"600px"},{default:a(()=>[e(E,null,{default:a(()=>[e($,null,{default:a(()=>[q("span",M,D(g.value?"Edit":"Add")+" Tag",1)]),_:1}),e(N,null,{default:a(()=>[e(U,{ref:"form",modelValue:c.value,"onUpdate:modelValue":i[1]||(i[1]=f=>c.value=f)},{default:a(()=>[e(R,{modelValue:u.value.name,"onUpdate:modelValue":i[0]||(i[0]=f=>u.value.name=f),label:"Name",rules:[_.required],required:""},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),e(S,null,{default:a(()=>[e(j),e(C,{color:"blue darken-1",onClick:s},{default:a(()=>[p("Cancel")]),_:1}),e(C,{color:"blue darken-1",onClick:V},{default:a(()=>[p("Save")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),K=h({__name:"TagList",setup(t){const m=d([]),o=d(null),r=d(!1),n=[{title:"Name",value:"name"},{title:"Actions",value:"actions",sortable:!1}];d(!1),console.log(n);const c=async()=>{const s=await T.getAllTags();console.log(s.data),m.value=s.data},u=()=>{o.value=null,r.value=!0},g=s=>{o.value=s,r.value=!0,console.log(o.value)},_=async s=>{await T.deleteTag(s.id),c(),console.log("Tag deleted")};return I(c),(s,V)=>(w(),A(L,null,{default:a(()=>[e(x,null,{default:a(()=>[e(k,null,{default:a(()=>[e(C,{color:"primary",onClick:u},{default:a(()=>[p("Add Tag")]),_:1})]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(k,null,{default:a(()=>[e(z,{headers:n,items:m.value,"item-key":"id",class:"elevation-1"},{"item.actions":a(({item:l})=>[e(y,{small:"",class:"mr-4",onClick:i=>g(l)},{default:a(()=>[p("mdi-pencil")]),_:2},1032,["onClick"]),e(y,{small:"",onClick:i=>_(l)},{default:a(()=>[p("mdi-delete")]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1}),e(G,{tag:o.value,dialogVisible:r.value,"onUpdate:dialogVisible":V[0]||(V[0]=l=>r.value=l),onRefresh:c},null,8,["tag","dialogVisible"])]),_:1}))}});export{K as default};
