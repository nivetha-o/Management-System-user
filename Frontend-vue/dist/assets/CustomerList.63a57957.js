import{a as A}from"./axios.0ae12843.js";import{f as B,g as c,h as N,o as b,i as k,w as a,b as l,V as E,a as T,t as w,j as $,k as D,l as h,m as L,n as F,q as R,s as x,d as f,u as S,v as P,x as j,y as I,z as y,A as U,B as M,C as q,c as z,D as G,F as H,E as J}from"./index.0d7d1e3a.js";const C=A.create({baseURL:"http://localhost:8080/api/users",headers:{"Content-type":"application/json"}}),_={getAllCustomers(){return C.get("")},getCustomerById(u){return C.get(`/${u}`)},createCustomer(u){return C.post("",u)},updateCustomer(u,p){return C.put(`/${u}`,p)},deleteCustomer(u){return C.delete(`/${u}`)}},K={class:"headline"},O=B({__name:"CustomerDialog",props:{customer:{},dialogVisible:{type:Boolean}},emits:["refresh","update:dialogVisible"],setup(u,{emit:p}){const n=u,d=p,v=c(!1),m=c(!1),s=c({name:"",email:"",phNo:"",tags:[]}),V=c(!1),i={required:e=>!!e||"Required.",maxLength:e=>e.length<=20||"Max 20 characters",email:e=>/.+@.+\..+/.test(e)||"E-mail must be valid.",phone:e=>/^\d{10}$/.test(e)||"Phone number must be 10 digits."};N(()=>n.customer,e=>{e!=null?(s.value={...e},V.value=!0):(s.value={name:"",email:"",phNo:"",tags:[]},V.value=!1)},{immediate:!0}),N(()=>n.dialogVisible,e=>{v.value=e},{immediate:!0});const r=()=>{v.value=!1,d("update:dialogVisible",!1)},g=async()=>{m.value&&(V.value&&n.customer?(await _.updateCustomer(n.customer.id,s.value),console.log("Customer Updated")):(await _.createCustomer(s.value),console.log("Customer saved"),s.value={name:"",email:"",phNo:"",tags:[]}),r(),d("refresh"))};return(e,t)=>(b(),k(P,{modelValue:v.value,"onUpdate:modelValue":t[5]||(t[5]=o=>v.value=o),"max-width":"600px"},{default:a(()=>[l(S,null,{default:a(()=>[l(E,null,{default:a(()=>[T("span",K,w(V.value?"Edit":"Add")+" User",1)]),_:1}),l($,null,{default:a(()=>[l(D,{ref:"form",modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=o=>m.value=o)},{default:a(()=>[l(h,{modelValue:s.value.name,"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.name=o),label:"Name",rules:[i.required,i.maxLength],required:""},null,8,["modelValue","rules"]),l(h,{modelValue:s.value.email,"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.email=o),rules:[i.required,i.email],label:"Email",required:""},null,8,["modelValue","rules"]),l(h,{modelValue:s.value.phNo,"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.phNo=o),rules:[i.required,i.phone],label:"Phone Number"},null,8,["modelValue","rules"]),l(L,{modelValue:s.value.tags,"onUpdate:modelValue":t[3]||(t[3]=o=>s.value.tags=o),label:"Tags",multiple:"",chips:"",clearable:""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(F,null,{default:a(()=>[l(R),l(x,{color:"blue darken-1",onClick:r},{default:a(()=>[f("Cancel")]),_:1}),l(x,{color:"blue darken-1",onClick:g},{default:a(()=>[f("Save")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),X=B({__name:"CustomerList",setup(u){const p=c([]),n=c(null),d=c(!1),v=[{title:"Name",value:"name"},{title:"Email",value:"email"},{title:"Phone Number",value:"phNo"},{title:"Tags",value:"tags"},{title:"Actions",value:"actions",sortable:!1}],m=async()=>{const r=await _.getAllCustomers();p.value=r.data},s=()=>{n.value=null,d.value=!0},V=r=>{n.value=r,d.value=!0},i=async r=>{await _.deleteCustomer(r.id),m(),console.log("Customer deleted")};return j(m),(r,g)=>(b(),k(I,null,{default:a(()=>[l(U,null,{default:a(()=>[l(y,null,{default:a(()=>[l(x,{color:"primary",onClick:s},{default:a(()=>[f("Add User")]),_:1})]),_:1})]),_:1}),l(U,null,{default:a(()=>[l(y,null,{default:a(()=>[l(M,{headers:v,items:p.value,"item-key":"id",class:"elevation-1"},{"item.actions":a(({item:e})=>[l(q,{small:"",class:"mr-4",onClick:t=>V(e)},{default:a(()=>[f("mdi-pencil")]),_:2},1032,["onClick"]),l(q,{small:"",onClick:t=>i(e)},{default:a(()=>[f("mdi-delete")]),_:2},1032,["onClick"])]),"item.tags":a(({item:e})=>[(b(!0),z(H,null,G(e.tags,(t,o)=>(b(),k(J,{key:o,class:"mr-2",outlined:""},{default:a(()=>[f(w(t),1)]),_:2},1024))),128))]),_:1},8,["items"])]),_:1})]),_:1}),l(O,{customer:n.value,dialogVisible:d.value,"onUpdate:dialogVisible":g[0]||(g[0]=e=>d.value=e),onRefresh:m},null,8,["customer","dialogVisible"])]),_:1}))}});export{X as default};
